// JavaScript Document

jQuery(document).ready(function ($) {
	'use strict';
	resize_btns();

	var headerHeight = $('.navbar').outerHeight(true);
	$('.uniq').css('padding-top', headerHeight);
	$('.header a[href*=\\#]:not([href=\\#]), a.btn[href*=\\#]:not([href=\\#]), #totop').click(function () {
		$('.navbar-nav .nav-link').removeClass('active');
		$(this).addClass('active');
		if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')
			&& location.hostname == this.hostname) {
			var target = $(this.hash);
			target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
			if (target.length) {
				$('html, body').animate({
					scrollTop: target.offset().top - headerHeight
				}, 1000);
				return false;
			}
		}
	});
	$('#main-extended .dropdown-menu').addClass('multi-column column-2');
	if ($(window).width() < 767) {
		var headerHeight = $('.navbar').outerHeight(true);
		$('#main-menu-wrapper').css('top', headerHeight);
	}
	$(window).load(function () {
		var headerHeight = $('nav').outerHeight(true);

		function goToByScroll(id) {
			$("html, body").animate({
				scrollTop: $("#" + id).offset().top - headerHeight
			}, 500);
		}
		if (window.location.hash != '') {
			goToByScroll(window.location.hash.substr(1));
		}

		if ($(window).width() > 767) {
			$('#sb_instagram').load(function() {
				resize_map();
			});
		}
	});
	$(window).bind('scroll', function () {
		if ($(window).scrollTop() > 50) {
			$('.navbar').addClass('scrolled');
		} else {
			$('.navbar').removeClass('scrolled');
		}
		if ($(window).scrollTop() > 350) {
			$('#totop').addClass('on-totop');
		} else {
			$('#totop').removeClass('on-totop');
		}
	});
	$('#btn-affluency').click(function () {
		$('#form-affluency').css('display', 'block');
		$('#membership-text').css('display', 'none');
		$('.page-template-page-landing').removeClass('main-bg');
		$('.page-template-page-landing').addClass('affluency-bg');
		$('.main-wrapper').css('display', 'none');
		$('#affluency-text').css('display', 'block');
	});
	$('#btn-legacy').click(function () {
		$('#form-legacy').css('display', 'block');
		$('#membership-text').css('display', 'none');
		$('.page-template-page-landing').removeClass('main-bg');
		$('.page-template-page-landing').addClass('legacy-bg');
		$('.main-wrapper').css('display', 'none');
		$('#legacy-text').css('display', 'block');
	});
	$('.btn-slide-panel').click(function(e) {
		e.preventDefault();
		$('#slide-panel').addClass('open');
		$('body').css('overflow', 'hidden');
	});
	$('.btn-show-photos').click(function(e) {
		e.preventDefault();
		$('.slide-panel-content').css('opacity', 0);
		$('#photo-gallery').css('opacity', 1);
		$('.btn-detail-panel').removeClass('active');
		$('.btns-details .btn-show-photos').addClass('active');
	});
	$('.btn-show-video').click(function(e) {
		e.preventDefault();
		$('.slide-panel-content').css('opacity', 0);
		$('#wrapper-video').css('opacity', 1);
		$('.btn-detail-panel').removeClass('active');
		$('.btns-details .btn-show-video').addClass('active');
	});
	$('.btn-show-map').click(function(e) {
		e.preventDefault();
		$('.slide-panel-content').css('opacity', 0);
		$('#wrapper-map').css('opacity', 1);
		$('.btn-detail-panel').removeClass('active');
		$('.btns-details .btn-show-map').addClass('active');
	});
	$('.close-slide-panel').click(function(e) {
		e.preventDefault();
		$('#slide-panel').removeClass('open');
		$('body').css('overflow', 'unset');
	});
	$('.btn-detail-panel').click(function(e) {
		$('.btn-detail-panel').removeClass('active');
		$(this).addClass('active');
	});
	$(window).resize(function () {
		$(window).load(function () {
			resize_btns();
			if ($(window).width() > 767) {
				resize_map();
			}
		});
	});

	function resize_btns() {
		var btnWidth = $('#membership-text .btn-white').outerWidth();
		$('#membership-text .btn-black').width(btnWidth);
	}
	$('#wrapper-affluence .close').click(function () {
		$('#main-membership-types').collapse('show');
	});
	$('#wrapper-legacy .close').click(function () {
		$('#main-membership-types').collapse('show');
	});

	function resize_map() {
		var instagramHeight = $('#sb_instagram').height();
		$('#map iframe').height(instagramHeight);
	}
	$("#art-register-modal").modal('show');

	$( '#autocomplete' ).autocomplete( {
		// use a function for its source, which will return ajax response
		source: function(request, response){
		  // well use opts.ajax_url which we enqueued with WP
		  $.post( opts.ajax_url, {
				action: 'search',            // our action is called search
				term: request.term           // and we get the term com jq-ui
			}, function(data) {
				console.log(data);
			  // when we get data from ajax, we pass it onto jq-ui autocomplete
			  response(data);
			}, 'json'
		  );
		},
	  });
	  const nextIcon = '<i class="fal fa-long-arrow-right"></i>';
	  const prevIcon = '<i class="fal fa-long-arrow-left"></i>';
	  $(".owl-carousel").owlCarousel({
		dots: false,
		responsive:{
			0:{
				items:1,
				margin: 15,
				stagePadding: 50
			},
			600:{
				items:2,
				margin:20,
				stagePadding: 50
			},
			1000:{
				nav: true,
				navText: [
					prevIcon,
					nextIcon
				],
				mouseDrag: false,
				items:4,
				margin:40
			}
		}
	});
});
